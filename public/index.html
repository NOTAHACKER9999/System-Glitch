<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>System Glitch Proxy</title>
  <style>
    /* === Basic Reset & Layout === */
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: Arial, sans-serif; background:#121212; color:#fff; }
    header { padding: 1rem; text-align:center; background:#1f1f1f; }
    h1 { font-size:2rem; color:#00ff99; }
    
    /* === Input & Button === */
    #urlInput { width: 60%; padding: 0.5rem; font-size:1rem; border-radius:5px; border:none; margin-right:0.5rem; }
    #goBtn { padding: 0.5rem 1rem; font-size:1rem; border:none; border-radius:5px; background:#00ff99; color:#121212; cursor:pointer; }
    #goBtn:hover { background:#00cc7a; }

    /* === Proxy Display === */
    #proxyFrame { width:100%; height:80vh; border:none; margin-top:1rem; background:#fff; }

    /* === Footer Watermark === */
    footer { position:fixed; bottom:10px; right:10px; font-size:0.8rem; color:#888; }
  </style>
</head>
<body>
  <header>
    <h1>System Glitch</h1>
    <div>
      <input type="text" id="urlInput" placeholder="Enter URL to proxy" />
      <button id="goBtn">Go</button>
    </div>
  </header>

  <iframe id="proxyFrame" src=""></iframe>

  <footer>Made by Glitch Override</footer>

  <script>
    const goBtn = document.getElementById('goBtn');
    const urlInput = document.getElementById('urlInput');
    const proxyFrame = document.getElementById('proxyFrame');

    // Function to normalize and validate URL
    function normalizeURL(url) {
      try {
        if (!/^https?:\/\//i.test(url)) url = 'https://' + url;
        return new URL(url).href;
      } catch {
        return null;
      }
    }

    // Load URL into proxy iframe
    goBtn.addEventListener('click', () => {
      const url = normalizeURL(urlInput.value.trim());
      if (!url) {
        alert('Please enter a valid URL.');
        return;
      }

      // Send through your serverless proxy endpoint
      proxyFrame.src = `/api/proxy?url=${encodeURIComponent(url)}`;
    });

    // Optional: allow pressing Enter to submit
    urlInput.addEventListener('keyup', e => {
      if (e.key === 'Enter') goBtn.click();
    });
  </script>
</body>
</html>
