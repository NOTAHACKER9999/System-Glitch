<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DuckDuckGo Proxy</title>
<style>
  body, html { margin:0; padding:0; height:100%; }
  iframe { width:100%; height:100%; border:none; }
  #overlay {
    position: fixed;
    bottom: 10px;
    right: 10px;
    background: linear-gradient(135deg, #333, #666);
    color: white;
    padding: 10px;
    border-radius: 8px;
    font-family: sans-serif;
    z-index: 9999;
    display: flex;
    gap: 5px;
    align-items: center;
  }
  #overlay button { padding: 4px 8px; border:none; border-radius:4px; cursor:pointer; }
</style>
</head>
<body>
<div id="overlay">
  <span id="urlDisplay">Loading...</span>
  <button onclick="undo()">Undo</button>
  <button onclick="redo()">Redo</button>
  <button onclick="inspect()">Inspect</button>
</div>

<iframe id="proxyFrame" src="/proxy?url=https://duckduckgo.com"></iframe>

<script>
let historyStack = [];
let redoStack = [];
const iframe = document.getElementById('proxyFrame');
const urlDisplay = document.getElementById('urlDisplay');

iframe.onload = () => {
  try {
    const currentUrl = iframe.contentWindow.location.href;
    historyStack.push(currentUrl);
    urlDisplay.textContent = currentUrl;
  } catch {
    // Cross-origin will block direct access; fallback to iframe src
    urlDisplay.textContent = iframe.src;
  }
};

function undo() {
  if (historyStack.length > 1) {
    redoStack.push(historyStack.pop());
    iframe.src = historyStack[historyStack.length - 1];
    urlDisplay.textContent = iframe.src;
  }
}

function redo() {
  if (redoStack.length) {
    const next = redoStack.pop();
    historyStack.push(next);
    iframe.src = next;
    urlDisplay.textContent = iframe.src;
  }
}

function inspect() {
  alert("Direct inspection is limited due to browser security, but you can use DevTools.");
}
</script>
</body>
</html>
